#!/bin/bash

DIRECTORY=$(cd `dirname $0` && pwd)
ROOT=$(dirname $DIRECTORY)
COFFEE_BIN=third_party/coffee-script/bin

echo_out ()
{
    echo "init says '$1'"
}

cd $ROOT
echo_out 'initializing git submodules'
git submodule init
git submodule update
echo_out 'done initializing git submodules'

cd $DIRECTORY
if ! [ -f coffee ]; then
    echo_out 'creating symlink to coffee'
    ln -s ../$COFFEE_BIN/coffee
fi
if ! [ -f cake ]; then
    echo_out 'creating symlink to cake'
    ln -s ../$COFFEE_BIN/cake
fi
cd $ROOT

echo_out 'ok'
